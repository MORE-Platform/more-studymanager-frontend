# Manual integration Test for Relative Scheduler Feature

### Background:
- Study was created or exists.

## Realtive Scheduler in SMF

| **Scenario**                                                                                                                      | **Given**                                                                                                                                                     | **Steps**                                                                                                                                                                                                                                 | **Expected Result**                                                                                                                                                                                                                                                                                                   | **Result** |
|-----------------------------------------------------------------------------------------------------------------------------------|---------------------------------------------------------------------------------------------------------------------------------------------------------------|-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|-----------|
| Open relative schedule dialog                                                                                                     | Observation Dialog is open                                                                                                                                    | <ul><li>WHEN I click on the button 'Add relative Schedule', </li></ul>                                                                                                                                                   | THEN the 'Manage relative schedule' dialog opens.                                                                                                                                                                                                                                                                     ||
| 'Save' start and end from 'Managae relative Schedule' dialog.                                                                     | Manage relative schedule dialog is open.                                                                                                                      | <ul><li> WHEN I set 'Starts on' 'Date' to 'Day 2' </li><li> AND  the 'Starts on' 'Time' to '09:00',</li><li> AND the 'Ends on' to 'Day 3' </li><li> AND the 'Ends on' 'Time' to '18:00',</li><li> AND click the 'Save' Button,</li></ul>  | THEN the 'Manage relative schedule' dialog should close and the observation dialog should display the preview for 'Individual Event' under Scheduler with the entered values (Starsts on: Day 2, 9:00; Ends on: Day 3, 18:00).                                                                                        ||
| 'Save' observation with simple relative schedule.                                                                                 | Manage relative schedule dialog is open<br> and the values for starts on and ends on are already entered ('Starst on': Day 2, 9:00; 'Ends on': Day 3, 18:00). | <ul><li>WHEN I fill out all required fields for the observation</li><li>AND click 'Save' on the 'observation dialog'</li></ul>                                                                                                            | THEN the Observation List shown should update and show now the new created observation with the Schedule data: 'Type': Relative, 'Start': Day 2, 9:00; 'End': Day 3, 18:00                                                                                                                                            |            |
| Check schedule data inside the observation dialog of observation in observation list, that has a relative schedule.               | Observation list does have already an item inside the list.                                                                                                   | <ul><li>WHEN i click on an observation in the list, that has a relative schedule</li></ul>                                                                                                                                                | THEN the observatin dialog opens and shows the exact same data displayed inside the list for the schedule preview.                                                                                                                                                                                                    |            |
| Check schedule data inside the 'Manage relative Schedule' dialog of observation in observation list, that has a relative schedule | Observation list does have already an item inside the list.                                                                                                   | <ul><li>WHEN I click on an observation in the list, that has a relative schedule</li><li>AND click on the 'EDIT relative schedule' button on the observation dialog</li></ul>                                                             | THEN the 'Manage relative schedule' dialog opens and shows the exact same data displayed inside the observation list for the scheduler values.                                                                                                                                                                        |            |
| Cancel start and end from 'Manage relative Schedule' dialog.                                                                      | Manage relative schedule dialog is open.                                                                                                                      | <ul><li> WHEN I set 'Starts on' 'Date' to 'Day 2' </li><li> AND  the 'Starts on' 'Time' to '09:00',</li><li> AND the 'Ends on' to 'Day 3' </li><li> AND the 'Ends on' 'Time' to '18:00',</li><li> AND click the 'Cancel' Button,</li></ul> | THEN the 'Manage relative schedule' dialog should close and and the observation dialog should display no preview for the scheduled time. The default information text is displayed underneath of the Schedule title.                                                                                                  ||
| Updating calculations when editing 'repeat event' <br> Initial values entered: 'Starts on': 2 day, 10:30; 'Ends on': 2 day, 18:30 | Manage relative schedule dialog is open.                                                                                                                      | <ul><li> WHEN I click the 'repeat event checkbox'</li><li> and enter 2 into the field next to 'Repeat every' </li><li> AND  select I select 9 into the input field next to 'End after'</li>                                               | THEN the information displayed right to the repetition values show Repeated: 5 times, End's 10 days after individual study start.                                                                                                                                                                                     ||
| Updating calculations when editing 'repeat event', when changing the unit value.                                                  | Manage relative schedule dialog is open and for starts on and ends on are already inital values entered ('Starst on': Day 2, 9:00; 'Ends on': Day 3, 18:00).  | <ul><li> WHEN I select a different unit in the dropdown for either repeat every and/or end after </li></ul>                                                                                                                               | THEN the information on the right side is calculated anew based on the new values.                                                                                                                                                                                                                                    ||
| Remove relative scheduler from observation dialog.                                                                                | Observation dialog is open and has already an realtive schedule entered in.                                                                                   | <ul><li>WHEN I click the button 'Remove scheduler'</li></ul>                                                                                                                                                                              | THEN the scheduler values should have been deleted from the observation, the preview is gone and the default information text is displayed again.                                                                                                                                                                     |            |
| Save the observation with no preentered schedule.                                                                                 | Observation dialog is open and the required fields are filled in, except a defined scheduler.                                                                 | <ul><li>WHEN I click the save button on the observation dialog</ul></li>                                                                                                                                                                  | THEN the observation dialog closes and saves the observation with the planned start and planned end of the study as absolute schedule for the observation. The observation list shows the created observation with the Schedule Type Event and the planned start and planned end as start and end of the observation. |            |


## ICal Export

### Additional Background:
- Observation 'Absolut (no repetition)': absolute scheduler from: 23.11.2023, 10:00 - 26.11.2023, 18:00 (no repetition)
- Observaiton 'Absolute: daily for 10 days': absolute scheduler from: 23.11.2023, 8:00 - 14:00, repetition: daily, after 10 days
- Observation 'Absolute: weekly (Mo, Fr) for 20 weeks': absoulte scheduler from: 23.11.2023, 16:00-18:00, repetition: weekly: Mo, Fr, after 20 times
- Observation 'Relative (no repetition)':  relative scheduler from: Day 2, 12:00 to Day 4 13:00 (no repetition)
- Observation 'Relative (repetition: 3 days, after 12 times)': relative scheduler from: Day 3, 6:00 to Day 3 8:00, repetition: frequency: 3 days, ends after: 12 times
- Observation 'Relative (repetition: 1 hour, after 32 times)' relative scheduler from : Day 4, 6:15 to Day 4, 6:30, repetition: frequency 1 hour, ends after: 32 times

| **Scenario**                                                             | **Given**                                        | **Steps**                                                                                                                                                                    | **Expected Result**                                                                                                                                                             | **Result** |
|--------------------------------------------------------------------------|--------------------------------------------------|------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|-----------|
| Check ICal export after creating several observations                    | see background info                              | <ul><li>WHEN I have configered all in background listed observations</li><li>AND click on the Ical export of the study</li></ul>                                             | THEN a Ical export data is downloaded, that shows (after import into outlook) all the observations in correct order.                                                            ||
| Check if App Observations are scheduled the same way as the ICal export. | see background info<br>Ical was already exported | <ul><li>WHEN I have configered all in background listed observations</li><li>AND have checked the ICal exprt</li><li>AND have logged into the study as participant</li></ul> | THEN the active observations are scheduled and shown based on the observation settings. The scheduled observations on the app have the same dates and times as the Ical export. |            |


## More App

### Background SMF Configuration
- Study planned start: 20.11.2023
- Study planned end: 31.12.2023

|Observation|Schedule Type| Start              | End           | Repetition: Every |Repetition: days| Repetition: ends |
|---|---|--------------------|---------------|-------------------|---|------------------|
|Simple Question|Absolute| current day, 8:00  | 25.11.2023, 18:00 | -                 |-| -                |
|Simple Question|Absolute| current day, 9:00  | current day, 10:00 | daily             |-| after 10 days    |
|Simple Question|Absolute| current day, 12:00 | current day, 13:00 | weekly            |MO, TUE| after 3 weeks    |
|Simple Question|Relative| Day 1, 15:00       | Day 2, 19:00  | -                 |-| -                |
|Simple Question|Relative| Day 2, 7:00        |Day 2,7:15| 1 hour            |-| 12 hours         |
|Simple Question|Relative| Day 4, 8:00        |Day 5,10:00|3 day|-|20 days|
|Simple Question|Relative| Day 1, 7:00        |Day 1, 7:01|1 min|-|1 hour|

<em>make list for all schedules and their expected result</em>
